<!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="google6529fc96efe4f8c6.html"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css"><meta name="keywords" content="Hexo,Jupyter,"><link rel="alternate" href="/atom.xml" title="Je vole" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1"><meta name="description" content="Make Jupyter Notebook your powerful studying assistant, as well as a blogging secretary who does everything for you! Use Hexo and Jupyter notebook to blog, especially for academic posts."><meta name="keywords" content="Hexo,Jupyter"><meta property="og:type" content="article"><meta property="og:title" content="Happy blogging with Jupyter Notebook"><meta property="og:url" content="https://blog.baoyukun.win/技术/前端/hbwjnotebook/index.html"><meta property="og:site_name" content="Je vole"><meta property="og:description" content="Make Jupyter Notebook your powerful studying assistant, as well as a blogging secretary who does everything for you! Use Hexo and Jupyter notebook to blog, especially for academic posts."><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://blog.baoyukun.win/技术/前端/hbwjnotebook/output_15_0.png"><meta property="og:updated_time" content="2017-09-25T02:20:02.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Happy blogging with Jupyter Notebook"><meta name="twitter:description" content="Make Jupyter Notebook your powerful studying assistant, as well as a blogging secretary who does everything for you! Use Hexo and Jupyter notebook to blog, especially for academic posts."><meta name="twitter:image" content="https://blog.baoyukun.win/技术/前端/hbwjnotebook/output_15_0.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",sidebar:{position:"left",display:"always",offset:12,offset_float:0,b2t:!1,scrollpercent:!1,onmobile:!0},fancybox:!0,motion:!0,duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:"",labels:""}}</script><link rel="canonical" href="https://blog.baoyukun.win/技术/前端/hbwjnotebook/"><script></script><title>Happy blogging with Jupyter Notebook | Je vole</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Je vole</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Pas de grand désir, pas de grand talent.</h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-list"></i><br>时光轴</a></li><li class="menu-item menu-item-guest"><a href="/guest/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i><br>留言簿</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>文章检索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="找一找..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://blog.baoyukun.win/技术/前端/hbwjnotebook/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="鲍煜坤"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Je vole"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">Happy blogging with Jupyter Notebook</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-25T04:20:02+02:00">2017-09-25</time> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="更新于" itemprop="dateModified" datetime="2017-09-25T04:20:02+02:00">2017-09-25</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/前端/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span> <span class="post-time">&nbsp; | &nbsp;<span class="post-meta-item-icon"><i class="fa fa-edit"></i></span> <span class="post-meta-item-text">字数统计</span> <span class="post-count">1,813 字</span></span> <span class="post-time">&nbsp; | &nbsp;<span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长</span> <span class="post-count">11 分</span></span> <span class="post-meta-divider">|</span><span class="page-pv"><i class="fa fa-eye" aria-hidden="true"></i> 热度<span class="busuanzi-value" id="busuanzi_value_page_pv"></span> ℃</span></div></header><div class="post-body" itemprop="articleBody"><script src="/assets/js/APlayer.min.js"></script><div class="note success"><p>Make Jupyter Notebook your powerful studying assistant, as well as a blogging secretary who does everything for you! Use Hexo and Jupyter notebook to blog, especially for academic posts.</p></div><a id="more"></a><h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1><ul><li><a href="#Introduction">Introduction</a></li><li><a href="#Conditional-Expectation-by-Optimization">Conditional Expectation by Optimization</a></li><li><a href="#Conditional-Expectation-Using-Direct-Integration">Conditional Expectation Using Direct Integration</a></li><li><a href="#Summary">Summary</a></li><li><a href="#中文模式">中文模式</a></li></ul><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>If you are a student in statistics or computer science, you may be fascinated by the elegance and efficiency of Jupyter Notebook. Meanwhile many of us would like to blogger using markdown in some static web blog framework like <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a> and <a href="https://jekyllrb.com/" target="_blank" rel="external">Jekyll</a>. <strong>Why do not make notebook output files our everyday posts?</strong> Sounds great, since we can record much more interesting things!</p><p>We know that thanks to <a href="https://github.com/jupyter/nbconvert" target="_blank" rel="external">nbconvert</a>, a utility provided by <a href="https://github.com/jupyter" target="_blank" rel="external">Jupyter community</a> which can be used directly as a command line tool, we can convert <code>ipynb</code> files mainly into <code>html</code>, <code>tex</code>, <code>md(GFM)</code> and <code>PDF</code> format. Which choice should be the <strong>fastest</strong> one, given the situation where ipynb output is an embedded element in a blog post container?</p><p>Well that is really hard to say since there have been already some solutions on the Web for different output formats, which you can refer to at the end of this post. However, not every solution is there for your needs and it is so hard to satisfy someone to the maximum extent that he or she is obliged to do some extra efforts to make his blog really a honey one, <strong>JUST LIKE ME :)</strong></p><p>My choice: <strong>Copy-paste md version directly into post</strong>, for this is the most flexible and convenient way, highly compatible with the post container in terms of rendering style. Besides, its file size is much smaller than that of html output generated in <em>full</em> template.</p><p>My problem: <strong>GFM renderer of Hexo-Next theme is not friendly with math tex commands</strong>, formulas often cannot be properly rendered by <a href="https://www.mathjax.org/" target="_blank" rel="external">Mathjax</a> because GFM renderer gets confused with some special symbols like <code>\\</code>, <code>\_</code> and <code>\[</code> – It does not know that characters between <em>dollar</em> pairs are mathematical formulas! Note that Jupyter notebook markdown renderer deals pretty well with math formulas, so I do not want add manually escape characters one by one for blog posts!</p><p>My solution: Inspired by <a href="https://hexo.io/docs/tag-plugins.html#Raw" target="_blank" rel="external">Hexo doc</a>, I write <a href="rawEq.py">a tiny regular expression gist</a> to automatically wrap math formulas with <code>raw</code> tag so that GFM renderer will not show interest in these guys.</p><p>The notebook you are reading now is exactly first written in Jupyter and then posted inside my blog. Thanks to the <a href="https://nbviewer.jupyter.org/" target="_blank" rel="external"><code>nbviewer service</code></a>, you may read the <a href="https://nbviewer.jupyter.org/urls/blog.baoyukun.win/%E6%8A%80%E6%9C%AF/%E5%89%8D%E7%AB%AF/hbwjnotebook/myNotebook.ipynb" target="_blank" rel="external">online-distributed version</a> in original html format, and download the <code>ipynb</code> file if you would like to.</p><p>In a word,</p>$$What\ you \ see \buildrel \rm def \over {:=} A \ blog \ post \buildrel \rm generate \over \longleftarrow A \ Jupyter \ Notebook \nonumber$$<h1 id="Conditional-Expectation-by-Optimization"><a href="#Conditional-Expectation-by-Optimization" class="headerlink" title="Conditional Expectation by Optimization"></a>Conditional Expectation by Optimization</h1><p>Now, let us consider the important case of the zero-mean bivariate Gaussian and try to find a function $h$ that minimizes the mean squared error (MSE). Again, trying to solve for the conditional expectation by minimizing the error over all possible functions $h$ is generally very, very hard. One alternative is to use parameters for the $h$ function and then just optimize over those. For example, we could assume that $h(Y)= \alpha Y$ and then use calculus to find the $\alpha$ parameter.</p><p>Let us try this with the zero-mean bivariate Gaussian density,</p>$$\mathbb{E}((X-\alpha Y )^2) = \mathbb{E}(\alpha^2 Y^2 - 2 \alpha X Y + X^2 )$$<p>and then differentiate this with respect to $\alpha$ to obtain</p>$$\mathbb{E}(2 \alpha Y^2 - 2 X Y ) = 2 \alpha \sigma_y^2 - 2 \mathbb{E}(XY) = 0$$<p>Then, solving for $\alpha$ gives us</p>$$\alpha = \frac{ \mathbb{E}(X Y)}{ \sigma_y^2 }$$<p>which means we have</p>$$\mathbb{ E}(X|Y) \approx \alpha Y = \frac{ \mathbb{E}(X Y )}{ \sigma_Y^2 } Y =\frac{\sigma_{X Y}}{ \sigma_Y^2 } Y$$<p>where that last equality is just notation. Remember here we assumed a special linear form for $h=\alpha Y$, but we did that for convenience. We still do not know whether or not this is the one true $h_{opt}$ that minimizes the MSE for all such functions.</p><h1 id="Conditional-Expectation-Using-Direct-Integration"><a href="#Conditional-Expectation-Using-Direct-Integration" class="headerlink" title="Conditional Expectation Using Direct Integration"></a>Conditional Expectation Using Direct Integration</h1><p>Now, let us try this again by computing $\mathbb{E}(X|Y)$ in the case of the bivariate Gaussian distribution straight from the definition.</p>$$\mathbb{E}(X|Y) = \int_{\mathbb{ R}} x \frac{f_{X,Y}(x,y)}{f_Y(y)} dx$$<p>where</p>$$ f_{X,Y}(x,y) = \frac{1}{2\pi |\mathbf{R}|^{\frac{1}{2}}} e^{-\frac{1}{2} \mathbf{v}^T \mathbf{R}^{-1} \mathbf{v} }$$<p>and where</p>$$\mathbf{v}= \left[ x,y \right]^T$$ $$\mathbf{R} = \left[\begin{array}{cc} \sigma_{x}^2 & \sigma_{xy} \\\\ \sigma_{xy} & \sigma_{y}^2 \\\\ \end{array} \right]$$<p>and with</p>$$\begin{eqnarray} \sigma_{xy} &=& \mathbb{E}(xy) \nonumber \\\\ \sigma_{x}^2 &=& \mathbb{E}(x^2) \nonumber \\\\ \sigma_{y}^2 &=& \mathbb{E}(y^2) \end{eqnarray}$$<p>This conditional expectation (Eq. 4 above) is a tough integral to evaluate, so we will do it with <code>sympy</code>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sympy <span class="keyword">import</span> Matrix, Symbol, exp, pi, simplify, integrate </div><div class="line"><span class="keyword">from</span> sympy <span class="keyword">import</span> stats, sqrt, oo, use</div><div class="line"><span class="keyword">from</span> sympy.abc <span class="keyword">import</span> y,x</div><div class="line"></div><div class="line">sigma_x = Symbol(<span class="string">'sigma_x'</span>,positive=<span class="keyword">True</span>)</div><div class="line">sigma_y = Symbol(<span class="string">'sigma_y'</span>,positive=<span class="keyword">True</span>)</div><div class="line">sigma_xy = Symbol(<span class="string">'sigma_xy'</span>,real=<span class="keyword">True</span>)</div><div class="line">fyy = stats.density(stats.Normal(<span class="string">'y'</span>,<span class="number">0</span>,sigma_y))(y)</div><div class="line"> </div><div class="line">R = Matrix([[sigma_x**<span class="number">2</span>, sigma_xy],</div><div class="line">            [sigma_xy,sigma_y**<span class="number">2</span>]])</div><div class="line">fxy = <span class="number">1</span>/(<span class="number">2</span>*pi)/sqrt(R.det()) * exp((-Matrix([[x,y]])*R.inv()* Matrix([[x],[y]]))[<span class="number">0</span>,<span class="number">0</span>]/<span class="number">2</span> )</div><div class="line"></div><div class="line">fcond = simplify(fxy/fyy)</div></pre></td></tr></table></figure><p>Unfortunately, <code>sympy</code> cannot immediately integrate this without some hints. So, we need to define a positive variable ($u$) and substitute it into the integration</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">u=Symbol(<span class="string">'u'</span>,positive=<span class="keyword">True</span>) <span class="comment"># define positive variable</span></div><div class="line"></div><div class="line">fcond2=fcond.subs(sigma_x**<span class="number">2</span>*sigma_y**<span class="number">2</span>-sigma_xy**<span class="number">2</span>,u) <span class="comment"># substitute as hint to integrate</span></div><div class="line">g=simplify(integrate(fcond2*x,(x,-oo,oo))) <span class="comment"># evaluate integral</span></div><div class="line">gg=g.subs( u,sigma_x**<span class="number">2</span> *sigma_y**<span class="number">2</span> - sigma_xy**<span class="number">2</span> ) <span class="comment"># substitute back in</span></div><div class="line">use( gg, simplify,level=<span class="number">2</span>) <span class="comment"># simplify exponent term</span></div></pre></td></tr></table></figure><pre><code>sigma_xy*y/sigma_y**2
</code></pre><p>Thus, by direct integration using <code>sympy</code>, we found</p>$$ \mathbb{ E}(X|Y) = Y \frac{\sigma_{xy}}{\sigma_{y}^{2}} $$<p>and this matches the prior result we obtained by direct minimization by assuming that $\mathbb{E}(X|Y) = \alpha Y$ and then solving for the optimal $\alpha$!</p><p>The importance of this result cannot be understated: the one true and optimal $h_{opt}$ <em>is a linear function</em> of $Y$.</p><p>In other words, assuming a linear function, which made the direct search for an optimal $h(Y)$ merely convenient yields the optimal result! This is a general result that extends for <em>all</em> Gaussian problems. The link between linear functions and optimal estimation of Gaussian random variables is the most fundamental result in statistical signal processing! This fact is exploited in everything from optimal filter design to adaptive signal processing.</p><p>We can easily extend this result to non-zero mean problems by inserting the means in the right places as follows:</p>$$\mathbb{ E}(X|Y) = \bar{X} + (Y-\bar{Y}) \frac{\sigma_{xy}}{\sigma_{y}^{2}}$$<p>where $\bar{X}$ is the mean of $X$ (same for $Y$).</p><h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>In this section, we showed that the conditional expectation for Gaussian random variables is a linear function, which, by a bizarre coincidence, is also the easiest one to work with. This result is fundamental to all optimal linear filtering problems (e.g. Kalman filter) and is the basis of most of the theory of stochastic processes used in signal processing. Up to this point, we have worked hard to illustrate all of the concepts we will need to unify our understanding of this entire field and figured out multiple approaches to these kinds of problems, most of which are far more difficult to compute. Thus, it is indeed just plain lucky that the most powerful distribution is the easiest to compute as a conditional expectation because it is a linear function. We will come back to this same result again and again as we work our way through these greater concepts.</p><h1 id="中文模式"><a href="#中文模式" class="headerlink" title="中文模式"></a>中文模式</h1><p>下面看看中英文混合的效果如何。</p><p>我们可以自由地写行内公式，如 $\cos 2\theta = \cos^2 \theta - \sin^2 \theta = 2 \cos^2 \theta - 1$。 We can display an inline formula, like $\sum_{i=0}^n i^2 = \frac{(n^2+n)(2n+1)}{6}$, very simple!</p><p>我们也可以写行间公式，如：</p>$$ \begin{equation} \frac{\partial u}{\partial t} = h^2 \left( \frac{\partial^2 u}{\partial x^2} + \frac{\partial^2 u}{\partial y^2} + \frac{\partial^2 u}{\partial z^2}\right) \label{eq:sample} \end{equation} $$<p>We can display formulas as blocks as followings:</p>$$ \left\{ \begin{aligned} \dot{x} & = \sigma(y-x) \\[2ex] \dot{y} & = \rho x - y - xz \\[2ex] \dot{z} & = -\beta z + xy \end{aligned} \right. $$<p>We can highlight equation by adding both border and background:</p>$$ \bbox[yellow,5px,border:2px solid red] { e^x=\lim_{n\to\infty} \left( 1+\frac{x}{n} \right)^n } $$<p>下面是一个矩阵：</p>$$ \begin{pmatrix} 1 & a_1 & a_1^2 & \cdots & a_1^n \\\ 1 & a_2 & a_2^2 & \cdots & a_2^n \\\ \vdots & \vdots & \vdots & \ddots & \vdots \\\ 1 & a_m & a_m^2 & \cdots & a_m^n \\\ \end{pmatrix} \nonumber $$<p>这是一个数组：</p>$$\begin{array}{c|lcr}value & \text{0} & \text{1} & \text{2} \\ \hline 0 & 0.24 & 1 & 125 \\ 1 & -1 & 189 & -8 \\ 2 & -20 & 2000 & 1+10i \end{array} \nonumber$$<p>我们可以引用公式$\eqref{eq:sample}$, 以下书写形式也很常用：</p>$$\operatorname*{Res}_{z=1}\left(\frac1{z^2-z}\right)=1$$ $$\dbinom{n}{r}=\binom{n}{n-r}=C^n_r=C^n_{n-r}$$ $$J_{\alpha}(x)=\sum_{m=0}^{\infty}\frac{(-1)^{m}}{m!\Gamma(m+\alpha+1)}(\frac{x}{2})^{2m+\alpha}$$ $$ i\hbar\frac{\partial \psi}{\partial t} = \frac{-\hbar^2}{2m} \left(\frac{\partial^2}{\partial x^2} + \frac{\partial^2}{\partial y^2} + \frac{\partial^2}{\partial z^2} \right) \psi + V \psi$$<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> matplotlib.animation <span class="keyword">as</span> animation</div><div class="line"></div><div class="line">fig = plt.figure()</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x, y)</span>:</span></div><div class="line">    <span class="keyword">return</span> np.sin(x) + np.cos(y)</div><div class="line"></div><div class="line">x = np.linspace(<span class="number">0</span>, <span class="number">2</span> * np.pi, <span class="number">120</span>)</div><div class="line">y = np.linspace(<span class="number">0</span>, <span class="number">2</span> * np.pi, <span class="number">100</span>).reshape(<span class="number">-1</span>, <span class="number">1</span>)</div><div class="line"></div><div class="line">im = plt.imshow(f(x, y), animated=<span class="keyword">True</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">updatefig</span><span class="params">(*args)</span>:</span></div><div class="line">    <span class="keyword">global</span> x, y</div><div class="line">    x += np.pi / <span class="number">15.</span></div><div class="line">    y += np.pi / <span class="number">20.</span></div><div class="line">    im.set_array(f(x, y))</div><div class="line">    <span class="keyword">return</span> im,</div><div class="line"></div><div class="line">ani = animation.FuncAnimation(fig, updatefig, interval=<span class="number">50</span>, blit=<span class="keyword">True</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure><p><img src="output_15_0.png" alt="png"></p><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><blockquote><p><strong><em><a href="https://nbconvert.readthedocs.io/en/latest/usage.html#supported-output-formats" target="_blank" rel="external">Supported output formats by nbconvert</a></em></strong><br><strong><em><a href="http://docs.mathjax.org/en/latest/tex.html" target="_blank" rel="external">MathJax TeX and LaTeX Support</a></em></strong><br><strong><em><a href="http://www.pkumonk.me/2014/03/05/hexo-with-latex-support/" target="_blank" rel="external">Add latex support to your hexo theme</a></em></strong><br><strong><em><a href="www.damian.oquanta.info/posts/nikola-nbconvert.html">Nikola + nbconvert realized on Damian blog</a></em></strong><br><strong><em><a href="http://jakevdp.github.io/" target="_blank" rel="external">@jakevdp uses Pelican and Jupyter Notebook to blog</a></em></strong><br><strong><em><a href="https://www.youtube.com/watch?v=py21dq1ZW8s" target="_blank" rel="external">An IPython extension to clean, build and deploy your Nikola</a></em></strong><br><strong><em><a href="https://www.html5rocks.com/en/tutorials/webcomponents/imports/" target="_blank" rel="external">HTML Imports: include for the web</a></em></strong></p></blockquote></div><div><div id="wechat_subscriber" style="display:block;padding:10px 0;margin:20px auto;width:100%;text-align:center"><img id="wechat_subscriber_qcode" src="/images/wechat-qcode.jpg" alt="鲍煜坤 wechat" style="width:200px;max-width:100%"><div>扫一扫，更多精彩等你哦(^_−)☆</div></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>帮我买杯奶茶，鼓励我继续创作吧ヾ(◍°∇°◍)ﾉﾞ</div><button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'><span>赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/images/moneyWechat.jpg" alt="鲍煜坤 WeChat Pay"><p>微信打赏</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" src="/images/moneyAlipay.jpg" alt="鲍煜坤 Alipay"><p>支付宝打赏</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong> 鲍煜坤</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://blog.baoyukun.win/技术/前端/hbwjnotebook/" title="Happy blogging with Jupyter Notebook">https://blog.baoyukun.win/技术/前端/hbwjnotebook/</a></li><li class="post-copyright-license"><strong>版权声明：</strong> 所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Hexo/" rel="tag"><i class="fa fa-tag"></i> Hexo</a><a href="/tags/Jupyter/" rel="tag"><i class="fa fa-tag"></i> Jupyter</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/杂谈/读书/notes-cs224n/" rel="next" title="Notes CS224n - NLP with Deep Learning"><i class="fa fa-chevron-left"></i> Notes CS224n - NLP with Deep Learning</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"></div></div></footer></article><div class="post-spread"><div class="addthis_inline_share_toolbox"><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-596b73d3e7d00f32"></script></div></div></div></div><div class="comments" id="comments"><div id="hypercomments_widget"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview">关于博主</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="鲍煜坤"><p class="site-author-name" itemprop="name">鲍煜坤</p><p class="site-description motion-element" itemprop="description">尽付无言高歌</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">10</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">7</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">15</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/baoyukun" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://www.linkedin.com/in/%E7%85%9C%E5%9D%A4-%E9%B2%8D-85b275119/" target="_blank" title="Linkedin"><i class="fa fa-fw fa-linkedin-square"></i> Linkedin</a></span><span class="links-of-author-item"><a href="https://www.facebook.com/yukun.bao" target="_blank" title="Facebook"><i class="fa fa-fw fa-facebook-official"></i> Facebook</a></span><span class="links-of-author-item"><a href="https://www.baoyukun.win" target="_blank" title="Accueil"><i class="fa fa-fw fa-address-card"></i> Accueil</a></span><span class="links-of-author-item"><a href="mailto:baoyukun1994@126.com" target="_blank" title="Email"><i class="fa fa-fw fa-envelope-open"></i> Email</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-globe"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="http://speit.sjtu.edu.cn/index.html" title="SJTU-ParisTech" target="_blank">SJTU-ParisTech</a></li><li class="links-of-blogroll-item"><a href="https://www.telecom-paristech.fr" title="Télécom ParisTech" target="_blank">Télécom ParisTech</a></li></ul></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Table-of-Contents"><span class="nav-number">1.</span> <span class="nav-text">Table of Contents</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction"><span class="nav-number">2.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Conditional-Expectation-by-Optimization"><span class="nav-number">3.</span> <span class="nav-text">Conditional Expectation by Optimization</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Conditional-Expectation-Using-Direct-Integration"><span class="nav-number">4.</span> <span class="nav-text">Conditional Expectation Using Direct Integration</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Summary"><span class="nav-number">5.</span> <span class="nav-text">Summary</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#中文模式"><span class="nav-number">6.</span> <span class="nav-text">中文模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#References"><span class="nav-number">7.</span> <span class="nav-text">References</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"><i class="fa fa-copyright" aria-hidden="true"></i> <span itemprop="copyrightYear">2017&emsp;&emsp;</span><span><i class="fa fa-at" aria-hidden="true"></i> <a href="https://www.baoyukun.win">鲍煜坤</a></span></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user-plus" aria-hidden="true"></i> 访客<span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 位</span><span class="site-pv"><i class="fa fa-paw" aria-hidden="true"></i> 访问<span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script><script type="text/javascript">_hcwp=window._hcwp||[],_hcwp.push({widget:"Bloggerstream",widget_id:94578,selector:".hc-comment-count",label:"{%COUNT%}"}),_hcwp.push({widget:"Stream",widget_id:94578,xid:"技术/前端/hbwjnotebook/"}),function(){if(!("HC_LOAD_INIT"in window)){HC_LOAD_INIT=!0;var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https":"http")+"://w.hypercomments.com/widget/hc/94578/en/widget.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e.nextSibling)}}()</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o);r.addEventListener("input",function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){var r=!1,s=0,a=0,i=n.title.trim(),c=i.toLowerCase(),l=n.content.trim().replace(/<[^>]+>/g,""),h=l.toLowerCase(),p=decodeURIComponent(n.url),u=[],f=[];if(""!=i&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}u=u.concat(e(t,c,!1)),f=f.concat(e(t,h,!1))}),(u.length>0||f.length>0)&&(r=!0,s=u.length+f.length)),r){[u,f].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});function d(e,o,n,r){for(var s=r[r.length-1],i=s.position,c=s.word,l=[],h=0;i+c.length<=n&&0!=r.length;){c===t&&h++,l.push({position:i,length:c.length});var p=i+c.length;for(r.pop();0!=r.length&&(s=r[r.length-1],i=s.position,c=s.word,p>i);)r.pop()}return a+=h,{hits:l,start:o,end:n,searchTextCount:h}}var g=[];0!=u.length&&g.push(d(0,0,i.length,u));for(var v=[];0!=f.length;){var $=f[f.length-1],C=$.position,m=$.word,x=C-20,w=C+80;x<0&&(x=0),w<C+m.length&&(w=C+m.length),w>l.length&&(w=l.length),v.push(d(0,x,w,f))}v.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var y=parseInt("1");y>=0&&(v=v.slice(0,y));function T(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var b="";0!=g.length?b+="<li><a href='"+p+"' class='search-result-title'>"+T(i,g[0])+"</a>":b+="<li><a href='"+p+"' class='search-result-title'>"+i+"</a>",v.forEach(function(t){b+="<a href='"+p+'\'><p class="search-result">'+T(l,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:a,hitCount:s,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}}),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),!1===isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){27===t.which&&$(".search-popup").is(":visible")&&onPopupClose()})</script><script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true, skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']}, TeX: {equationNumbers: { autoNumber: "all" }}});</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {var all = MathJax.Hub.getAllJax(), i; for (i=0; i < all.length; i += 1) { all[i].SourceElement().parentNode.className += ' has-jax';}});</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.1"></script></body></html><script type="text/javascript" src="/js/src/love.js"></script>